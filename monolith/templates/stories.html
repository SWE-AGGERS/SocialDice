{% extends "layout.html" %}
{% block title %}
    Stories
{% endblock %}
{% block content %}
    <h1>Story List</h1>
    <h5>{{ message }}</h5>
    <ul>
        {% for story in stories %}
            <li>
                "{{ story.text }}" Likes: {{ story.likes }} Dislikes: {{ story.dislikes }} ({{ story.date }})
                <a href="/story/{{ story.id }}/reaction/1">Like it!</a>
                <a href="/story/{{ story.id }}/reaction/2">Dislike it!</a>
                {% if id == story.author_id %}
                    <a href="#myModal" class="trigger-btn" data-toggle="modal">Delete story</a>
                        <div id="myModal" class="modal fade">
                            <div class="modal-dialog modal-confirm">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Delete story</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    </div>
                                    <div class="modal-body">
                                        <p>Do you really want to delete this story? This process cannot be undone.</p>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-info" data-dismiss="modal">Cancel</button>
                                        <a href="stories/{{ story.id }}/remove/stories" id="delete" class="btn btn-primary">Delete</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                {% endif %}
            </li>
        {% endfor %}
    </ul>

    <!-- Button to Open the Modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal"> New story</button>

    <!-- The Modal -->
    <div class="modal" id="myModal">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Create your story!</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    Roll the dice and let your immagination run wild!
                    <form action="" method="POST">
                        {{ form.hidden_tag() }}
                        {% for field in form.display %}

                            <div class="form-group ">
                                <br></br>
                                {{ form[field]() }}
                            </div>
                            <br>
                        {% endfor %}
                        <br>
                        <input type=submit value="Publish">
                    </form>
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>

{% endblock %}